{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Toto-\\\\OneDrive\\\\Desktop\\\\cinema-webapp\\\\frontend\\\\src\\\\pages\\\\Calendar.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport '../styles/calendar.css';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Calendar() {\n  _s();\n  const [releases, setReleases] = useState({});\n  const [active, setActive] = useState('this');\n  const [selectedDate, setSelectedDate] = useState(null);\n  const [dateFilteredFilms, setDateFilteredFilms] = useState([]);\n  const [showDatePicker, setShowDatePicker] = useState(false);\n  const [animKey, setAnimKey] = useState(0);\n  const dateInputRef = useRef(null);\n  useEffect(() => {\n    fetch('http://localhost:8080/api/releases').then(r => r.json()).then(setReleases);\n  }, []);\n  const groups = {\n    previous: 'Scorsa settimana',\n    this: 'Questa settimana',\n    week1: 'Tra 1 settimana',\n    week2: 'Tra 2 settimane',\n    week3: 'Tra 3 settimane'\n  };\n  function handleDateChange(e) {\n    const date = e.target.value;\n    setSelectedDate(date);\n    if (date) {\n      setActive(null);\n      const allFilms = Array.from(new Map(Object.values(releases).flat().map(f => [f.id, f])).values());\n      setDateFilteredFilms(allFilms.filter(f => f.releaseDate === date));\n      setAnimKey(prev => prev + 1);\n    } else {\n      setDateFilteredFilms([]);\n      setActive('this');\n    }\n  }\n  function handleChoosePeriod() {\n    const newState = !showDatePicker;\n    setShowDatePicker(newState);\n    setSelectedDate(null);\n    setActive(null);\n    setTimeout(() => {\n      if (newState && dateInputRef.current) {\n        try {\n          dateInputRef.current.showPicker();\n        } catch {\n          dateInputRef.current.focus();\n        }\n      }\n    }, 100);\n  }\n  const filmsToShow = selectedDate ? dateFilteredFilms : releases[active] || [];\n  function changePeriod(k) {\n    setActive(k);\n    setSelectedDate(null);\n    setShowDatePicker(false);\n    setAnimKey(prev => prev + 1);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"section-title\",\n      children: \"Calendario Uscite\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"calendar-controls\",\n      children: [Object.keys(groups).map(k => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'choice ' + (active === k ? 'active' : ''),\n        onClick: () => changePeriod(k),\n        children: groups[k]\n      }, k, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: 'choice period-button ' + (showDatePicker ? 'active' : ''),\n        style: {\n          marginLeft: 12\n        },\n        onClick: handleChoosePeriod,\n        children: \"Scegli Periodo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), showDatePicker && /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: dateInputRef,\n        type: \"date\",\n        value: selectedDate || '',\n        onChange: handleDateChange,\n        className: \"choice date-input date-anim\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-grid netflix-enter\",\n      children: filmsToShow.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: '#cbd9ea',\n          marginTop: 20\n        },\n        children: \"Nessun film disponibile per la data selezionata.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this) : filmsToShow.map((f, i) => /*#__PURE__*/_jsxDEV(Link, {\n        to: `/film/${f.id}`,\n        className: \"calendar-link netflix-item\",\n        style: {\n          animationDelay: `${i * 0.12}s`\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"thumb\",\n          src: 'http://localhost:8080/api/images/' + f.thumbnail,\n          alt: f.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"calendar-title\",\n          children: f.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"calendar-date\",\n          children: f.releaseDate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 15\n        }, this)]\n      }, f.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }, this))\n    }, animKey, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n}\n_s(Calendar, \"h35XuGGoNzJYW6kGV7S+gkXHj2k=\");\n_c = Calendar;\nvar _c;\n$RefreshReg$(_c, \"Calendar\");","map":{"version":3,"names":["React","useEffect","useState","useRef","Link","jsxDEV","_jsxDEV","Calendar","_s","releases","setReleases","active","setActive","selectedDate","setSelectedDate","dateFilteredFilms","setDateFilteredFilms","showDatePicker","setShowDatePicker","animKey","setAnimKey","dateInputRef","fetch","then","r","json","groups","previous","this","week1","week2","week3","handleDateChange","e","date","target","value","allFilms","Array","from","Map","Object","values","flat","map","f","id","filter","releaseDate","prev","handleChoosePeriod","newState","setTimeout","current","showPicker","focus","filmsToShow","changePeriod","k","className","children","fileName","_jsxFileName","lineNumber","columnNumber","keys","onClick","style","marginLeft","ref","type","onChange","length","color","marginTop","i","to","animationDelay","src","thumbnail","alt","title","_c","$RefreshReg$"],"sources":["C:/Users/Toto-/OneDrive/Desktop/cinema-webapp/frontend/src/pages/Calendar.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport '../styles/calendar.css';\nimport { Link } from 'react-router-dom';\n\nexport default function Calendar() {\n  const [releases, setReleases] = useState({});\n  const [active, setActive] = useState('this');\n  const [selectedDate, setSelectedDate] = useState(null);\n  const [dateFilteredFilms, setDateFilteredFilms] = useState([]);\n  const [showDatePicker, setShowDatePicker] = useState(false);\n  const [animKey, setAnimKey] = useState(0);\n\n  const dateInputRef = useRef(null);\n\n  useEffect(() => {\n    fetch('http://localhost:8080/api/releases')\n      .then(r => r.json())\n      .then(setReleases);\n  }, []);\n\n  const groups = {\n    previous: 'Scorsa settimana',\n    this: 'Questa settimana',\n    week1: 'Tra 1 settimana',\n    week2: 'Tra 2 settimane',\n    week3: 'Tra 3 settimane'\n  };\n\n  function handleDateChange(e) {\n    const date = e.target.value;\n    setSelectedDate(date);\n\n    if (date) {\n      setActive(null);\n      const allFilms = Array.from(\n        new Map(\n          Object.values(releases).flat().map(f => [f.id, f])\n        ).values()\n      );\n      setDateFilteredFilms(allFilms.filter(f => f.releaseDate === date));\n      setAnimKey(prev => prev + 1);\n    } else {\n      setDateFilteredFilms([]);\n      setActive('this');\n    }\n  }\n\n  function handleChoosePeriod() {\n    const newState = !showDatePicker;\n    setShowDatePicker(newState);\n    setSelectedDate(null);\n    setActive(null);\n\n    setTimeout(() => {\n      if (newState && dateInputRef.current) {\n        try { dateInputRef.current.showPicker(); }\n        catch { dateInputRef.current.focus(); }\n      }\n    }, 100);\n  }\n\n  const filmsToShow = selectedDate ? dateFilteredFilms : (releases[active] || []);\n\n  function changePeriod(k) {\n    setActive(k);\n    setSelectedDate(null);\n    setShowDatePicker(false);\n    setAnimKey(prev => prev + 1);\n  }\n\n  return (\n    <div className='container'>\n      <h2 className='section-title'>Calendario Uscite</h2>\n\n      <div className='calendar-controls'>\n        {Object.keys(groups).map(k => (\n          <div key={k}\n               className={'choice ' + (active === k ? 'active' : '')}\n               onClick={() => changePeriod(k)}>\n            {groups[k]}\n          </div>\n        ))}\n\n        <button className={'choice period-button ' + (showDatePicker ? 'active' : '')}\n                style={{ marginLeft: 12 }}\n                onClick={handleChoosePeriod}>\n          Scegli Periodo\n        </button>\n\n        {showDatePicker && (\n          <input ref={dateInputRef}\n                 type=\"date\"\n                 value={selectedDate || ''}\n                 onChange={handleDateChange}\n                 className=\"choice date-input date-anim\" />\n        )}\n      </div>\n\n      <div key={animKey} className=\"card-grid netflix-enter\">\n        {filmsToShow.length === 0 ? (\n          <div style={{ color: '#cbd9ea', marginTop: 20 }}>\n            Nessun film disponibile per la data selezionata.\n          </div>\n        ) : (\n          filmsToShow.map((f, i) => (\n            <Link key={f.id}\n                  to={`/film/${f.id}`}\n                  className=\"calendar-link netflix-item\"\n                  style={{ animationDelay: `${i * 0.12}s` }}>\n              <img className='thumb'\n                   src={'http://localhost:8080/api/images/' + f.thumbnail}\n                   alt={f.title} />\n              <div className=\"calendar-title\">{f.title}</div>\n              <div className=\"calendar-date\">{f.releaseDate}</div>\n            </Link>\n          ))\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}