{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Toto-\\\\OneDrive\\\\Desktop\\\\cinema-webapp\\\\frontend\\\\src\\\\pages\\\\Calendar.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport '../styles/calendar.css';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Calendar() {\n  _s();\n  const [releases, setReleases] = useState({});\n  const [active, setActive] = useState('this');\n  const [selectedDate, setSelectedDate] = useState(null);\n  const [dateFilteredFilms, setDateFilteredFilms] = useState([]);\n  const [showDatePicker, setShowDatePicker] = useState(false);\n  const dateInputRef = useRef(null);\n  useEffect(() => {\n    fetch('http://localhost:8080/api/releases').then(r => r.json()).then(setReleases);\n  }, []);\n  const groups = {\n    previous: 'Scorsa settimana',\n    this: 'Questa settimana',\n    week1: 'Tra 1 settimana',\n    week2: 'Tra 2 settimane',\n    week3: 'Tra 3 settimane'\n  };\n  function handleDateChange(e) {\n    const date = e.target.value;\n    setSelectedDate(date);\n    if (date) {\n      setActive(null);\n      const allFilms = Array.from(new Map(Object.values(releases).flat().map(f => [f.id, f])).values());\n      const filtered = allFilms.filter(f => f.releaseDate === date);\n      setDateFilteredFilms(filtered);\n    } else {\n      setDateFilteredFilms([]);\n      setActive('this');\n    }\n  }\n  function handleChoosePeriod() {\n    const newState = !showDatePicker;\n    setShowDatePicker(newState);\n    setSelectedDate(null);\n    setActive(null);\n    setTimeout(() => {\n      if (newState && dateInputRef.current) {\n        try {\n          dateInputRef.current.showPicker();\n        } catch {\n          dateInputRef.current.focus();\n        }\n      }\n    }, 50);\n  }\n  const filmsToShow = selectedDate ? dateFilteredFilms : releases[active] || [];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"section-title\",\n      children: \"Calendario Uscite\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"calendar-controls\",\n      children: [Object.keys(groups).map(k => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'choice ' + (active === k ? 'active' : ''),\n        onClick: () => {\n          setActive(k);\n          setSelectedDate(null);\n          setShowDatePicker(false);\n        },\n        children: groups[k]\n      }, k, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: 'choice period-button ' + (showDatePicker ? 'active' : ''),\n        style: {\n          marginLeft: 12\n        },\n        onClick: handleChoosePeriod,\n        children: \"Scegli Periodo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), showDatePicker && /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: dateInputRef,\n        type: \"date\",\n        value: selectedDate || '',\n        onChange: handleDateChange,\n        className: \"choice date-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-grid\",\n      children: filmsToShow.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: '#cbd9ea',\n          marginTop: 20\n        },\n        children: \"Nessun film disponibile per la data selezionata.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this) : filmsToShow.map(f => /*#__PURE__*/_jsxDEV(Link, {\n        to: `/film/${f.id}`,\n        className: \"calendar-link\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"thumb\",\n            src: 'http://localhost:8080/api/images/' + f.thumbnail,\n            alt: f.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"calendar-title\",\n            children: f.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"calendar-date\",\n            children: f.releaseDate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 15\n        }, this)\n      }, f.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n_s(Calendar, \"anXRQ47mKl98bxmciLMAyxI9WK8=\");\n_c = Calendar;\nvar _c;\n$RefreshReg$(_c, \"Calendar\");","map":{"version":3,"names":["React","useEffect","useState","useRef","Link","jsxDEV","_jsxDEV","Calendar","_s","releases","setReleases","active","setActive","selectedDate","setSelectedDate","dateFilteredFilms","setDateFilteredFilms","showDatePicker","setShowDatePicker","dateInputRef","fetch","then","r","json","groups","previous","this","week1","week2","week3","handleDateChange","e","date","target","value","allFilms","Array","from","Map","Object","values","flat","map","f","id","filtered","filter","releaseDate","handleChoosePeriod","newState","setTimeout","current","showPicker","focus","filmsToShow","className","children","fileName","_jsxFileName","lineNumber","columnNumber","keys","k","onClick","style","marginLeft","ref","type","onChange","length","color","marginTop","to","textAlign","src","thumbnail","alt","title","_c","$RefreshReg$"],"sources":["C:/Users/Toto-/OneDrive/Desktop/cinema-webapp/frontend/src/pages/Calendar.js"],"sourcesContent":["import React, {useEffect, useState, useRef} from 'react';\nimport '../styles/calendar.css';\nimport { Link } from 'react-router-dom';\n\nexport default function Calendar(){\n  const [releases, setReleases] = useState({});\n  const [active, setActive] = useState('this');\n  const [selectedDate, setSelectedDate] = useState(null);\n  const [dateFilteredFilms, setDateFilteredFilms] = useState([]);\n  const [showDatePicker, setShowDatePicker] = useState(false);\n  const dateInputRef = useRef(null);\n\n  useEffect(()=>{\n    fetch('http://localhost:8080/api/releases')\n      .then(r=>r.json())\n      .then(setReleases);\n  },[]);\n\n  const groups = {\n    previous:'Scorsa settimana',\n    this:'Questa settimana',\n    week1:'Tra 1 settimana',\n    week2:'Tra 2 settimane',\n    week3:'Tra 3 settimane'\n  };\n\n  function handleDateChange(e){\n    const date = e.target.value;\n    setSelectedDate(date);\n\n    if(date){\n      setActive(null);\n\n      const allFilms = Array.from(\n        new Map(\n          Object.values(releases)\n            .flat()\n            .map(f => [f.id, f])\n        ).values()\n      );\n\n      const filtered = allFilms.filter(f => f.releaseDate === date);\n      setDateFilteredFilms(filtered);\n    } else {\n      setDateFilteredFilms([]);\n      setActive('this');\n    }\n  }\n\n  function handleChoosePeriod(){\n    const newState = !showDatePicker;\n    setShowDatePicker(newState);\n    setSelectedDate(null);\n    setActive(null);\n\n    setTimeout(()=>{\n      if(newState && dateInputRef.current){\n        try { dateInputRef.current.showPicker(); }\n        catch { dateInputRef.current.focus(); }\n      }\n    }, 50);\n  }\n\n  const filmsToShow = selectedDate\n    ? dateFilteredFilms\n    : (releases[active] || []);\n\n  return (\n    <div className='container'>\n      <h2 className='section-title'>Calendario Uscite</h2>\n\n      <div className='calendar-controls'>\n        {Object.keys(groups).map(k=>(\n          <div\n            key={k}\n            className={'choice ' + (active===k ? 'active' : '')}\n            onClick={()=>{\n              setActive(k);\n              setSelectedDate(null);\n              setShowDatePicker(false);\n            }}\n          >\n            {groups[k]}\n          </div>\n        ))}\n\n        <button\n          className={'choice period-button ' + (showDatePicker ? 'active' : '')}\n          style={{marginLeft: 12}}\n          onClick={handleChoosePeriod}\n        >\n          Scegli Periodo\n        </button>\n\n        {showDatePicker && (\n          <input\n            ref={dateInputRef}\n            type='date'\n            value={selectedDate || ''}\n            onChange={handleDateChange}\n            className='choice date-input'\n          />\n        )}\n      </div>\n\n      <div className='card-grid'>\n        {filmsToShow.length === 0 ? (\n          <div style={{color:'#cbd9ea', marginTop:20}}>\n            Nessun film disponibile per la data selezionata.\n          </div>\n        ) : (\n          filmsToShow.map(f=>(\n            <Link key={f.id} to={`/film/${f.id}`} className=\"calendar-link\">\n              <div style={{textAlign:'center'}}>\n                \n                <img\n                  className='thumb'\n                  src={'http://localhost:8080/api/images/'+f.thumbnail}\n                  alt={f.title}\n                />\n\n                <div className=\"calendar-title\">{f.title}</div>\n                <div className=\"calendar-date\">{f.releaseDate}</div>\n\n              </div>\n            </Link>\n          ))\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}