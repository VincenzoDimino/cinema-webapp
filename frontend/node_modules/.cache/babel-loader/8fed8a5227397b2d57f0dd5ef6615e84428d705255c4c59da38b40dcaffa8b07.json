{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Toto-\\\\OneDrive\\\\Desktop\\\\cinema-webapp\\\\frontend\\\\src\\\\pages\\\\Calendar.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport '../styles/calendar.css';\nimport { Link } from 'react-router-dom';\n\n/**\n * Calendar page: filter by predefined week groups or by a specific date.\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Calendar() {\n  _s();\n  const [releases, setReleases] = useState({});\n  const [active, setActive] = useState('this');\n  const [selectedDate, setSelectedDate] = useState(null);\n  const [dateFilteredFilms, setDateFilteredFilms] = useState([]);\n  const [showDatePicker, setShowDatePicker] = useState(false);\n\n  // NEW → riferimento al date picker\n  const dateInputRef = useRef(null);\n  useEffect(() => {\n    fetch('http://localhost:8080/api/releases').then(r => r.json()).then(setReleases);\n  }, []);\n  const groups = {\n    previous: 'Scorsa settimana',\n    this: 'Questa settimana',\n    week1: 'Tra 1 settimana',\n    week2: 'Tra 2 settimane',\n    week3: 'Tra 3 settimane'\n  };\n\n  /** Handle date filter */\n  function handleDateChange(e) {\n    const date = e.target.value;\n    setSelectedDate(date);\n    if (date) {\n      setActive(null);\n\n      // Flatten + remove duplicates by id\n      const allFilms = Array.from(new Map(Object.values(releases).flat().map(f => [f.id, f])).values());\n      const filtered = allFilms.filter(f => f.releaseDate === date);\n      setDateFilteredFilms(filtered);\n    } else {\n      setDateFilteredFilms([]);\n      setActive('this');\n    }\n  }\n\n  /** OPEN THE DATEPICKER IMMEDIATELY */\n  function handleChoosePeriod() {\n    const newState = !showDatePicker;\n    setShowDatePicker(newState);\n    setSelectedDate(null);\n    setActive(null);\n\n    // If opened → automatically show calendar UI\n    setTimeout(() => {\n      if (newState && dateInputRef.current) {\n        try {\n          dateInputRef.current.showPicker();\n        } catch (err) {\n          dateInputRef.current.focus(); // fallback\n        }\n      }\n    }, 50);\n  }\n  const filmsToShow = selectedDate ? dateFilteredFilms : releases[active] || [];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"section-title\",\n      children: \"Calendario Uscite\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"calendar-controls\",\n      children: [Object.keys(groups).map(k => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'choice ' + (active === k ? 'active' : ''),\n        onClick: () => {\n          setActive(k);\n          setSelectedDate(null);\n          setShowDatePicker(false);\n        },\n        children: groups[k]\n      }, k, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: 'choice period-button ' + (showDatePicker ? 'active' : ''),\n        style: {\n          marginLeft: 12\n        },\n        onClick: handleChoosePeriod,\n        children: \"Scegli Periodo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), showDatePicker && /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: dateInputRef,\n        type: \"date\",\n        value: selectedDate || '',\n        onChange: handleDateChange,\n        className: \"choice date-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-grid\",\n      children: filmsToShow.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: '#cbd9ea',\n          marginTop: 20\n        },\n        children: \"Nessun film disponibile per la data selezionata.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }, this) : filmsToShow.map(f => /*#__PURE__*/_jsxDEV(Link, {\n        to: `/film/${f.id}`,\n        className: \"calendar-link\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"thumb\",\n            src: 'http://localhost:8080/api/images/' + f.thumbnail,\n            alt: f.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 6\n            },\n            children: [f.title, /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                color: '#cbd9ea'\n              },\n              children: f.releaseDate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 15\n        }, this)\n      }, f.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n}\n_s(Calendar, \"anXRQ47mKl98bxmciLMAyxI9WK8=\");\n_c = Calendar;\nvar _c;\n$RefreshReg$(_c, \"Calendar\");","map":{"version":3,"names":["React","useEffect","useState","useRef","Link","jsxDEV","_jsxDEV","Calendar","_s","releases","setReleases","active","setActive","selectedDate","setSelectedDate","dateFilteredFilms","setDateFilteredFilms","showDatePicker","setShowDatePicker","dateInputRef","fetch","then","r","json","groups","previous","this","week1","week2","week3","handleDateChange","e","date","target","value","allFilms","Array","from","Map","Object","values","flat","map","f","id","filtered","filter","releaseDate","handleChoosePeriod","newState","setTimeout","current","showPicker","err","focus","filmsToShow","className","children","fileName","_jsxFileName","lineNumber","columnNumber","keys","k","onClick","style","marginLeft","ref","type","onChange","length","color","marginTop","to","textAlign","src","thumbnail","alt","title","_c","$RefreshReg$"],"sources":["C:/Users/Toto-/OneDrive/Desktop/cinema-webapp/frontend/src/pages/Calendar.js"],"sourcesContent":["import React, {useEffect, useState, useRef} from 'react';\nimport '../styles/calendar.css';\nimport { Link } from 'react-router-dom';\n\n/**\n * Calendar page: filter by predefined week groups or by a specific date.\n */\nexport default function Calendar(){\n  const [releases, setReleases] = useState({});\n  const [active, setActive] = useState('this');\n  const [selectedDate, setSelectedDate] = useState(null);\n  const [dateFilteredFilms, setDateFilteredFilms] = useState([]);\n  const [showDatePicker, setShowDatePicker] = useState(false);\n\n  // NEW → riferimento al date picker\n  const dateInputRef = useRef(null);\n\n  useEffect(()=>{\n    fetch('http://localhost:8080/api/releases')\n      .then(r=>r.json())\n      .then(setReleases);\n  },[]);\n\n  const groups = {\n    previous:'Scorsa settimana',\n    this:'Questa settimana',\n    week1:'Tra 1 settimana',\n    week2:'Tra 2 settimane',\n    week3:'Tra 3 settimane'\n  };\n\n  /** Handle date filter */\n  function handleDateChange(e){\n    const date = e.target.value;\n    setSelectedDate(date);\n\n    if(date){\n      setActive(null);\n\n      // Flatten + remove duplicates by id\n      const allFilms = Array.from(\n        new Map(\n          Object.values(releases)\n            .flat()\n            .map(f => [f.id, f])\n        ).values()\n      );\n\n      const filtered = allFilms.filter(f => f.releaseDate === date);\n      setDateFilteredFilms(filtered);\n    } else {\n      setDateFilteredFilms([]);\n      setActive('this');\n    }\n  }\n\n  /** OPEN THE DATEPICKER IMMEDIATELY */\n  function handleChoosePeriod(){\n    const newState = !showDatePicker;\n    setShowDatePicker(newState);\n    setSelectedDate(null);\n    setActive(null);\n\n    // If opened → automatically show calendar UI\n    setTimeout(()=>{\n      if(newState && dateInputRef.current){\n        try {\n          dateInputRef.current.showPicker();\n        } catch (err) {\n          dateInputRef.current.focus(); // fallback\n        }\n      }\n    }, 50);\n  }\n\n  const filmsToShow = selectedDate\n    ? dateFilteredFilms\n    : (releases[active] || []);\n\n  return (\n    <div className='container'>\n      <h2 className='section-title'>Calendario Uscite</h2>\n\n      <div className='calendar-controls'>\n        {Object.keys(groups).map(k=>(\n          <div\n            key={k}\n            className={'choice ' + (active===k ? 'active' : '')}\n            onClick={()=>{\n              setActive(k);\n              setSelectedDate(null);\n              setShowDatePicker(false);\n            }}\n          >\n            {groups[k]}\n          </div>\n        ))}\n\n        {/* BUTTON SCELGI PERIODO */}\n        <button\n          className={'choice period-button ' + (showDatePicker ? 'active' : '')}\n          style={{marginLeft: 12}}\n          onClick={handleChoosePeriod}\n        >\n          Scegli Periodo\n        </button>\n\n        {/* DATE PICKER VISUALIZZATO SOLO SE ATTIVO */}\n        {showDatePicker && (\n          <input\n            ref={dateInputRef}\n            type='date'\n            value={selectedDate || ''}\n            onChange={handleDateChange}\n            className='choice date-input'\n          />\n        )}\n      </div>\n\n      <div className='card-grid'>\n        {filmsToShow.length === 0 ? (\n          <div style={{color:'#cbd9ea', marginTop:20}}>\n            Nessun film disponibile per la data selezionata.\n          </div>\n        ) : (\n          filmsToShow.map(f=>(\n            <Link key={f.id} to={`/film/${f.id}`} className=\"calendar-link\">\n              <div style={{textAlign:'center'}}>\n                <img\n                  className='thumb'\n                  src={'http://localhost:8080/api/images/'+f.thumbnail}\n                  alt={f.title}\n                />\n                <div style={{marginTop:6}}>\n                  {f.title}\n                  <div style={{color:'#cbd9ea'}}>{f.releaseDate}</div>\n                </div>\n              </div>\n            </Link>\n          ))\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}